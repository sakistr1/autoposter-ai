<svg xmlns="http://www.w3.org/2000/svg" width="1080" height="1350" viewBox="0 0 1080 1350">
  <defs>
    <style>
      .bg { fill: {{ brand_color or "#111827" }}; }
      .title { font: 800 72px/1.1 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; fill: #ffffff; }
      .price { font: 700 56px/1 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; fill: #22c55e; }
      .cta { font: 700 42px/1 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; fill: #111827; }
      .muted { font: 500 28px/1 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; fill: #e5e7eb; }
      .badge { fill: #ffffff; rx: 24; }
      .wm { font: 900 180px/1 system-ui; fill: rgba(255,255,255,0.15); }
    </style>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="12" stdDeviation="24" flood-color="#000" flood-opacity="0.35"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect class="bg" x="0" y="0" width="1080" height="1350"/>

  <!-- Τίτλος -->
  <g transform="translate(64, 96)">
    <text class="title">
      {% set t = (title or "Τίτλος προϊόντος").strip() %}
      {% if t|length > 36 %}{{ t[:36] ~ "…" }}{% else %}{{ t }}{% endif %}
    </text>
    <text class="muted" y="72" dy="56">Προσφορά που δεν χάνεται</text>
  </g>

  <!-- Εικόνα προϊόντος (safe area ~ 880x880) -->
  <g transform="translate(100, 250)" filter="url(#shadow)">
    {% if product_image_data %}
      <image href="{{ product_image_data }}" x="0" y="0" width="880" height="880" preserveAspectRatio="xMidYMid slice" />
    {% else %}
      <rect x="0" y="0" width="880" height="880" fill="#374151" />
      <text x="440" y="440" text-anchor="middle" dominant-baseline="central" class="muted">Χωρίς εικόνα</text>
    {% endif %}
  </g>

  <!-- Price badge -->
  <g transform="translate(64, 1180)">
    <rect class="badge" width="360" height="96"/>
    <text class="price" x="24" y="66">
      {{ (price or "€0.00") }}
    </text>
  </g>

  <!-- CTA badge -->
  <g transform="translate(480, 1180)">
    <rect class="badge" width="536" height="96"/>
    <text class="cta" x="24" y="64">
      {% set c = (cta or "Δες περισσότερα") %}
      {% if c|length > 24 %}{{ c[:24] ~ "…" }}{% else %}{{ c }}{% endif %}
    </text>
  </g>

  <!-- Watermark μόνο στο preview -->
  {% if is_preview %}
    <g transform="translate(540,675) rotate(-20)">
      <text class="wm" text-anchor="middle" dominant-baseline="central">PREVIEW</text>
    </g>
  {% endif %}
</svg>
